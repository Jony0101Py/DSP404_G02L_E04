<!-- - comentado por: sc231259 -->

@model List<desafio_02_e04.Models.CarritoItem>

@{
    ViewBag.Title = "Carrito";
}

<style>
    body {
        background-image: url('/Content/fondo_TemperTrap.png');
        background-size: cover;
        background-position: center;
        background-attachment: fixed;
    }

    h2 {
        text-align: center;
        color: #fd7e14; /* Color naranja para el título */
        margin-bottom: 20px;
    }

    .alert-info {
        text-align: center;
        font-size: 16px;
        font-weight: bold;
    }

    .table {
        background-color: rgba(255, 255, 255, 0.9); /* Fondo blanco con opacidad */
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* Sombra suave */
    }

        .table thead {
            background-color: #fd7e14; /* Color naranja para el encabezado */
            color: white;
        }

        .table th, .table td {
            text-align: center;
            vertical-align: middle;
        }

        .table td {
            background-color: #f8f9fa; /* Fondo gris muy claro para las celdas */
        }

        .table img {
            width: 100px;
            height: auto;
            border-radius: 4px; /* Bordes redondeados */
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2); /* Sombra alrededor de las imágenes */
        }

    .btn {
        border-radius: 4px;
        font-weight: bold;
        padding: 8px 16px;
    }

    .btn-danger {
        background-color: #dc3545; /* Rojo para el botón de eliminar */
        border-color: #dc3545;
    }

        .btn-danger:hover {
            background-color: #c82333;
            border-color: #bd2130;
        }

    .btn-success {
        background-color: #28a745; /* Verde para el botón de proceder al pago */
        border-color: #28a745;
    }

        .btn-success:hover {
            background-color: #218838;
            border-color: #1e7e34;
        }

    .btn-primary {
        background-color: #007bff; /* Azul para el botón de volver al menú */
        border-color: #007bff;
    }

        .btn-primary:hover {
            background-color: #0069d9;
            border-color: #0056b3;
        }

    .input-group {
        margin: 10px 0;
    }

    .total-carrito {
        font-size: 20px;
        font-weight: bold;
        color: #fd7e14; /* Color naranja para el total */
        text-align: center;
        margin: 20px 0;
    }

    .volver-menu {
        text-align: center;
        margin-top: 20px;
    }
</style>

<h2>Carrito de Compras</h2>

@if (Model.Count == 0)
{
    <p class="alert alert-info">No tienes ítems en tu carrito.</p>
}
else
{
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Nombre del Plato</th>
                <th>Precio</th>
                <th>Cantidad</th>
                <th>Total</th>
                <th>Acción</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr>
                    <td>@item.NombrePlato</td>
                    <td>@item.Precio.ToString("C")</td>
                    <td>@item.Cantidad</td>
                    <td>@(item.Precio * item.Cantidad)</td>
                    <td>
                        @using (Html.BeginForm("RemoveFromCart", "Menus", FormMethod.Post, new { @class = "form-inline" }))
                        {
                            @Html.AntiForgeryToken()
                            <input type="hidden" name="menuId" value="@item.MenuId" />
                            <button type="submit" class="btn btn-danger">
                                <i class="fas fa-trash-alt"></i> Eliminar
                            </button>
                        }
                    </td>
                </tr>
            }
        </tbody>
    </table>

    <div class="total-carrito">
        Total del carrito: @Model.Sum(i => i.Precio * i.Cantidad).ToString("C")
    </div>

    using (Html.BeginForm("Checkout", "Order", FormMethod.Post, new { @class = "form-inline" }))
    {
        @Html.AntiForgeryToken()
        <button type="submit" class="btn btn-success">
            <i class="fas fa-credit-card"></i> Proceder al Pago
        </button>
    }

    <div class="volver-menu">
        <a href="@Url.Action("Index", "Menus")" class="btn btn-primary">
            <i class="fas fa-arrow-left"></i> Volver al Menú
        </a>
    </div>
}
